<div ng-include="'partials/navbar.html'"></div>

<div class="container-fluid">
    <div ng-include="'partials/sidebar.html'"></div>

    <div class="row">
        <main class="col-sm-9 offset-sm-3 col-md-10 offset-md-2">
            <h2>Search</h2>
            <hr/>
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-5">
                        <div class="alert alert-success" role="alert" ng-if="successMessage">{{successMessage}}</div>
                        <div class="alert alert-danger" role="alert" ng-if="errorMessage">{{errorMessage}}</div>
                        <div>Anzahl Dokumente: {{documentCount}}</div>
                        <h2></h2>
                        <form name="search">
                            <input id="search-input" ng-model="searchQuery" type="text" class="form-control"/>
                            <button type="submit" class="btn btn-primary" ng-click="doSearch()">Search!</button>
                        </form>
                        <div>
                            <div ng-if="searchResult && searchResult.length == 0">Nothing found!</div>
                            <div ng-if="searchResult && searchResult.length > 0">Documents found: {{searchResult.length}}</div>

                            <img ng-repeat="item in searchResult"
                                 title="{{item.name}}"
                                 alt="{{item.name}}"
                                 style="max-width: 50%; max-height: auto;"
                                 src='data:image/png;base64,{{item.thumbnail}}'
                                 ng-click="showPdf(item)" />
                            </img>
                        </div>
                    </div>
                    <div class="col-md-7" style="height: 800px"> <!-- TODO MVR find a more elegant way of doing this -->
                        <!-- Content for the pdf -->
                         <div ng-if="previewData" style="width: 100%; height:100%">
                            <object width='100%' height='100%' data='data:application/pdf;base64,{{previewData}}'></object>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        <div ng-include="'partials/footer.html'"></div>
    </div>
</div>